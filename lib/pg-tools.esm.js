import e from"lodash";var n=function(){return n=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},n.apply(this,arguments)};var t,r={parse:function(e){try{return JSON.parse(e)}catch(n){return e}},stringify:function(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(e){return""}}};!function(e){e.CLOSE="closeWebView",e.GET_USER_INFO="getUserInfo",e.LOGIN="doLogin",e.GET_COMMON_PARAMS="getCommonParams",e.SAVE_FILE="saveImageToAlbum",e.QR_CODE_PARSER="callQRParser",e.SIGN="sign",e.SET_BAR_STATUS="setNativeBarStatus",e.SHOW_TOAST="showHint",e.QR_CODE_CLOSE="closeQRParser",e.SET_LOADING="setLoadingStatus",e.CALL_PHOTO_PICKER="callPhotoPicker",e.REPORT_EVENT="reportEvent",e.PURCHASE="purchase",e.GET_APP_PRODUCT_INFO="getIAPProductInfo",e.PURCHASE_COMPLETE="completePurchase",e.SET_STORAGE="setH5Cache",e.GET_STORAGE="getH5Cache",e.SET_INPUT_FILE_ATTRIBUTES="setInputFileAttributes"}(t||(t={}));var i={run:
//! window.webkit.messageHandlers[type]?.postMessage 不可简写，一定要一级一级写全
function(i){var o=i.type,a=i.data,d=void 0===a?{}:a,s=i.callback,w=void 0===s||s,l=t[o];return"function"==typeof function(e){var n;try{return"ios"===window.PG_CONSTANTS.platform?window.webkit&&window.webkit.messageHandlers&&(null===(n=window.webkit.messageHandlers[e])||void 0===n?void 0:n.postMessage):window.androidClient&&window.androidClient[e]}catch(e){return!1}}(l)||window._debug?new Promise((function(t,i){try{var o=void 0;if(o=n({},d),w){var a=e.uniqueId("callback_");o.callback=a;window[a]=function(e){return window[a]=null,"string"==typeof e&&(e=r.parse(e)),t(e),e}}var s=r.stringify(o);!function(e,n){var t,r;try{if("ios"===window.PG_CONSTANTS.platform){if(window.webkit&&window.webkit.messageHandlers&&(null===(t=window.webkit.messageHandlers[e])||void 0===t?void 0:t.postMessage))return window.webkit&&window.webkit.messageHandlers&&(null===(r=window.webkit.messageHandlers[e])||void 0===r?void 0:r.postMessage(n));if(window._debug)return window.androidClient&&window.androidClient[e]&&window.androidClient[e](n)}return window.androidClient&&window.androidClient[e]&&window.androidClient[e](n)}catch(e){}}(l,s)}catch(e){i(e)}})):(console.error(new Error("不存在type为".concat(l,"的方法可供调用！"))),Promise.reject())}},o=i,a={bridge:i};export{o as PGBridge,a as default};
//# sourceMappingURL=pg-tools.esm.js.map
