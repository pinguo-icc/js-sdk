"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("lodash")),n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};var r,i={parse:function(e){try{return JSON.parse(e)}catch(t){return e}},stringify:function(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(e){return""}}};!function(e){e.CLOSE="closeWebView",e.GET_USER_INFO="getUserInfo",e.LOGIN="doLogin",e.GET_COMMON_PARAMS="getCommonParams",e.SAVE_FILE="saveImageToAlbum",e.QR_CODE_PARSER="callQRParser",e.SIGN="sign",e.SET_BAR_STATUS="setNativeBarStatus",e.SHOW_TOAST="showHint",e.QR_CODE_CLOSE="closeQRParser",e.SET_LOADING="setLoadingStatus",e.CALL_PHOTO_PICKER="callPhotoPicker",e.REPORT_EVENT="reportEvent",e.PURCHASE="purchase",e.GET_APP_PRODUCT_INFO="getIAPProductInfo",e.PURCHASE_COMPLETE="completePurchase",e.SET_STORAGE="setH5Cache",e.GET_STORAGE="getH5Cache",e.SET_INPUT_FILE_ATTRIBUTES="setInputFileAttributes"}(r||(r={}));var o={run:
//! window.webkit.messageHandlers[type]?.postMessage 不可简写，一定要一级一级写全
function(e){var o=e.type,a=e.data,d=void 0===a?{}:a,s=e.callback,w=void 0===s||s,u=r[o];return"function"==typeof function(e){var t;try{return"ios"===window.PG_CONSTANTS.platform?window.webkit&&window.webkit.messageHandlers&&(null===(t=window.webkit.messageHandlers[e])||void 0===t?void 0:t.postMessage):window.androidClient&&window.androidClient[e]}catch(e){return!1}}(u)||window._debug?new Promise((function(e,r){try{var o=void 0;if(o=n({},d),w){var a=t.default.uniqueId("callback_");o.callback=a;window[a]=function(t){return window[a]=null,"string"==typeof t&&(t=i.parse(t)),e(t),t}}var s=i.stringify(o);!function(e,t){var n,r;try{if("ios"===window.PG_CONSTANTS.platform){if(window.webkit&&window.webkit.messageHandlers&&(null===(n=window.webkit.messageHandlers[e])||void 0===n?void 0:n.postMessage))return window.webkit&&window.webkit.messageHandlers&&(null===(r=window.webkit.messageHandlers[e])||void 0===r?void 0:r.postMessage(t));if(window._debug)return window.androidClient&&window.androidClient[e]&&window.androidClient[e](t)}return window.androidClient&&window.androidClient[e]&&window.androidClient[e](t)}catch(e){}}(u,s)}catch(e){r(e)}})):(console.error(new Error("不存在type为".concat(u,"的方法可供调用！"))),Promise.reject())}},a=o,d={bridge:o};exports.PGBridge=a,exports.default=d;
//# sourceMappingURL=pg-tools.common.js.map
