!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("lodash")):"function"==typeof define&&define.amd?define(["exports","lodash"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self)["pg-tools"]={},e._)}(this,(function(e,n){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=t(n),o=function(){return o=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},o.apply(this,arguments)};var r,a={parse:function(e){try{return JSON.parse(e)}catch(n){return e}},stringify:function(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(e){return""}}};!function(e){e.CLOSE="closeWebView",e.GET_USER_INFO="getUserInfo",e.LOGIN="doLogin",e.GET_COMMON_PARAMS="getCommonParams",e.SAVE_FILE="saveImageToAlbum",e.QR_CODE_PARSER="callQRParser",e.SIGN="sign",e.SET_BAR_STATUS="setNativeBarStatus",e.SHOW_TOAST="showHint",e.QR_CODE_CLOSE="closeQRParser",e.SET_LOADING="setLoadingStatus",e.CALL_PHOTO_PICKER="callPhotoPicker",e.REPORT_EVENT="reportEvent",e.PURCHASE="purchase",e.GET_APP_PRODUCT_INFO="getIAPProductInfo",e.PURCHASE_COMPLETE="completePurchase",e.SET_STORAGE="setH5Cache",e.GET_STORAGE="getH5Cache",e.SET_INPUT_FILE_ATTRIBUTES="setInputFileAttributes"}(r||(r={}));var d={run:
//! window.webkit.messageHandlers[type]?.postMessage 不可简写，一定要一级一级写全
function(e){var n=e.type,t=e.data,d=void 0===t?{}:t,s=e.callback,w=void 0===s||s,l=r[n];return"function"==typeof function(e){var n;try{return"ios"===window.PG_CONSTANTS.platform?window.webkit&&window.webkit.messageHandlers&&(null===(n=window.webkit.messageHandlers[e])||void 0===n?void 0:n.postMessage):window.androidClient&&window.androidClient[e]}catch(e){return!1}}(l)||window._debug?new Promise((function(e,n){try{var t=void 0;if(t=o({},d),w){var r=i.default.uniqueId("callback_");t.callback=r;window[r]=function(n){return window[r]=null,"string"==typeof n&&(n=a.parse(n)),e(n),n}}var s=a.stringify(t);!function(e,n){var t,i;try{if("ios"===window.PG_CONSTANTS.platform){if(window.webkit&&window.webkit.messageHandlers&&(null===(t=window.webkit.messageHandlers[e])||void 0===t?void 0:t.postMessage))return window.webkit&&window.webkit.messageHandlers&&(null===(i=window.webkit.messageHandlers[e])||void 0===i?void 0:i.postMessage(n));if(window._debug)return window.androidClient&&window.androidClient[e]&&window.androidClient[e](n)}return window.androidClient&&window.androidClient[e]&&window.androidClient[e](n)}catch(e){}}(l,s)}catch(e){n(e)}})):(console.error(new Error("不存在type为".concat(l,"的方法可供调用！"))),Promise.reject())}},s=d,w={bridge:d};e.PGBridge=s,e.default=w,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=pg-tools.umd.js.map
